{"ast":null,"code":"import DataMap from './DataMap.js';\nimport ChainMap from './ChainMap.js';\nimport RenderObject from './RenderObject.js';\nclass RenderObjects extends ChainMap {\n  constructor(renderer, nodes, geometries, pipelines, info) {\n    super();\n    this.renderer = renderer;\n    this.nodes = nodes;\n    this.geometries = geometries;\n    this.pipelines = pipelines;\n    this.info = info;\n    this.dataMap = new DataMap();\n  }\n  get(object, material, scene, camera, lightsNode) {\n    const chainArray = [object, material, scene, camera, lightsNode];\n    let renderObject = super.get(chainArray);\n    if (renderObject === undefined) {\n      renderObject = new RenderObject(this.nodes, this.geometries, this.renderer, object, material, scene, camera, lightsNode);\n      this._initRenderObject(renderObject);\n      this.set(chainArray, renderObject);\n    } else {\n      const data = this.dataMap.get(renderObject);\n      const cacheKey = renderObject.getCacheKey();\n      if (data.cacheKey !== cacheKey) {\n        data.cacheKey = cacheKey;\n        this.pipelines.delete(renderObject);\n        this.nodes.delete(renderObject);\n      }\n    }\n    return renderObject;\n  }\n  dispose() {\n    super.dispose();\n    this.dataMap.clear();\n  }\n  _initRenderObject(renderObject) {\n    const data = this.dataMap.get(renderObject);\n    if (data.initialized !== true) {\n      data.initialized = true;\n      data.cacheKey = renderObject.getCacheKey();\n      const onDispose = () => {\n        renderObject.material.removeEventListener('dispose', onDispose);\n        this.pipelines.delete(renderObject);\n        this.nodes.delete(renderObject);\n        this.delete(renderObject.getChainArray());\n      };\n      renderObject.material.addEventListener('dispose', onDispose);\n    }\n  }\n}\nexport default RenderObjects;","map":{"version":3,"names":["DataMap","ChainMap","RenderObject","RenderObjects","constructor","renderer","nodes","geometries","pipelines","info","dataMap","get","object","material","scene","camera","lightsNode","chainArray","renderObject","undefined","_initRenderObject","set","data","cacheKey","getCacheKey","delete","dispose","clear","initialized","onDispose","removeEventListener","getChainArray","addEventListener"],"sources":["C:/Users/LENOVO/Desktop/reactjsProject/drillit/node_modules/three/examples/jsm/renderers/common/RenderObjects.js"],"sourcesContent":["import DataMap from './DataMap.js';\r\nimport ChainMap from './ChainMap.js';\r\nimport RenderObject from './RenderObject.js';\r\n\r\nclass RenderObjects extends ChainMap {\r\n\r\n\tconstructor( renderer, nodes, geometries, pipelines, info ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.renderer = renderer;\r\n\t\tthis.nodes = nodes;\r\n\t\tthis.geometries = geometries;\r\n\t\tthis.pipelines = pipelines;\r\n\t\tthis.info = info;\r\n\r\n\t\tthis.dataMap = new DataMap();\r\n\r\n\t}\r\n\r\n\tget( object, material, scene, camera, lightsNode ) {\r\n\r\n\t\tconst chainArray = [ object, material, scene, camera, lightsNode ];\r\n\r\n\t\tlet renderObject = super.get( chainArray );\r\n\r\n\t\tif ( renderObject === undefined ) {\r\n\r\n\t\t\trenderObject = new RenderObject( this.nodes, this.geometries, this.renderer, object, material, scene, camera, lightsNode );\r\n\r\n\t\t\tthis._initRenderObject( renderObject );\r\n\r\n\t\t\tthis.set( chainArray, renderObject );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst data = this.dataMap.get( renderObject );\r\n\t\t\tconst cacheKey = renderObject.getCacheKey();\r\n\r\n\t\t\tif ( data.cacheKey !== cacheKey ) {\r\n\r\n\t\t\t\tdata.cacheKey = cacheKey;\r\n\r\n\t\t\t\tthis.pipelines.delete( renderObject );\r\n\t\t\t\tthis.nodes.delete( renderObject );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn renderObject;\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tsuper.dispose();\r\n\r\n\t\tthis.dataMap.clear();\r\n\r\n\t}\r\n\r\n\t_initRenderObject( renderObject ) {\r\n\r\n\t\tconst data = this.dataMap.get( renderObject );\r\n\r\n\t\tif ( data.initialized !== true ) {\r\n\r\n\t\t\tdata.initialized = true;\r\n\t\t\tdata.cacheKey = renderObject.getCacheKey();\r\n\r\n\t\t\tconst onDispose = () => {\r\n\r\n\t\t\t\trenderObject.material.removeEventListener( 'dispose', onDispose );\r\n\r\n\t\t\t\tthis.pipelines.delete( renderObject );\r\n\t\t\t\tthis.nodes.delete( renderObject );\r\n\r\n\t\t\t\tthis.delete( renderObject.getChainArray() );\r\n\r\n\t\t\t};\r\n\r\n\t\t\trenderObject.material.addEventListener( 'dispose', onDispose );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n}\r\n\r\nexport default RenderObjects;\r\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,cAAc;AAClC,OAAOC,QAAQ,MAAM,eAAe;AACpC,OAAOC,YAAY,MAAM,mBAAmB;AAE5C,MAAMC,aAAa,SAASF,QAAQ,CAAC;EAEpCG,WAAWA,CAAEC,QAAQ,EAAEC,KAAK,EAAEC,UAAU,EAAEC,SAAS,EAAEC,IAAI,EAAG;IAE3D,KAAK,CAAC,CAAC;IAEP,IAAI,CAACJ,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACC,IAAI,GAAGA,IAAI;IAEhB,IAAI,CAACC,OAAO,GAAG,IAAIV,OAAO,CAAC,CAAC;EAE7B;EAEAW,GAAGA,CAAEC,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,MAAM,EAAEC,UAAU,EAAG;IAElD,MAAMC,UAAU,GAAG,CAAEL,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,MAAM,EAAEC,UAAU,CAAE;IAElE,IAAIE,YAAY,GAAG,KAAK,CAACP,GAAG,CAAEM,UAAW,CAAC;IAE1C,IAAKC,YAAY,KAAKC,SAAS,EAAG;MAEjCD,YAAY,GAAG,IAAIhB,YAAY,CAAE,IAAI,CAACI,KAAK,EAAE,IAAI,CAACC,UAAU,EAAE,IAAI,CAACF,QAAQ,EAAEO,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,MAAM,EAAEC,UAAW,CAAC;MAE1H,IAAI,CAACI,iBAAiB,CAAEF,YAAa,CAAC;MAEtC,IAAI,CAACG,GAAG,CAAEJ,UAAU,EAAEC,YAAa,CAAC;IAErC,CAAC,MAAM;MAEN,MAAMI,IAAI,GAAG,IAAI,CAACZ,OAAO,CAACC,GAAG,CAAEO,YAAa,CAAC;MAC7C,MAAMK,QAAQ,GAAGL,YAAY,CAACM,WAAW,CAAC,CAAC;MAE3C,IAAKF,IAAI,CAACC,QAAQ,KAAKA,QAAQ,EAAG;QAEjCD,IAAI,CAACC,QAAQ,GAAGA,QAAQ;QAExB,IAAI,CAACf,SAAS,CAACiB,MAAM,CAAEP,YAAa,CAAC;QACrC,IAAI,CAACZ,KAAK,CAACmB,MAAM,CAAEP,YAAa,CAAC;MAElC;IAED;IAEA,OAAOA,YAAY;EAEpB;EAEAQ,OAAOA,CAAA,EAAG;IAET,KAAK,CAACA,OAAO,CAAC,CAAC;IAEf,IAAI,CAAChB,OAAO,CAACiB,KAAK,CAAC,CAAC;EAErB;EAEAP,iBAAiBA,CAAEF,YAAY,EAAG;IAEjC,MAAMI,IAAI,GAAG,IAAI,CAACZ,OAAO,CAACC,GAAG,CAAEO,YAAa,CAAC;IAE7C,IAAKI,IAAI,CAACM,WAAW,KAAK,IAAI,EAAG;MAEhCN,IAAI,CAACM,WAAW,GAAG,IAAI;MACvBN,IAAI,CAACC,QAAQ,GAAGL,YAAY,CAACM,WAAW,CAAC,CAAC;MAE1C,MAAMK,SAAS,GAAGA,CAAA,KAAM;QAEvBX,YAAY,CAACL,QAAQ,CAACiB,mBAAmB,CAAE,SAAS,EAAED,SAAU,CAAC;QAEjE,IAAI,CAACrB,SAAS,CAACiB,MAAM,CAAEP,YAAa,CAAC;QACrC,IAAI,CAACZ,KAAK,CAACmB,MAAM,CAAEP,YAAa,CAAC;QAEjC,IAAI,CAACO,MAAM,CAAEP,YAAY,CAACa,aAAa,CAAC,CAAE,CAAC;MAE5C,CAAC;MAEDb,YAAY,CAACL,QAAQ,CAACmB,gBAAgB,CAAE,SAAS,EAAEH,SAAU,CAAC;IAE/D;EAED;AAGD;AAEA,eAAe1B,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}