{"ast":null,"code":"import TempNode from '../core/TempNode.js';\nimport { dot, mix } from '../math/MathNode.js';\nimport { add } from '../math/OperatorNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { addNodeElement, ShaderNode, nodeProxy, float, vec3, mat3 } from '../shadernode/ShaderNode.js';\nconst saturationNode = new ShaderNode(_ref => {\n  let {\n    color,\n    adjustment\n  } = _ref;\n  return adjustment.mix(luminance(color), color);\n});\nconst vibranceNode = new ShaderNode(_ref2 => {\n  let {\n    color,\n    adjustment\n  } = _ref2;\n  const average = add(color.r, color.g, color.b).div(3.0);\n  const mx = color.r.max(color.g.max(color.b));\n  const amt = mx.sub(average).mul(adjustment).mul(-3.0);\n  return mix(color, mx, amt);\n});\nconst hueNode = new ShaderNode(_ref3 => {\n  let {\n    color,\n    adjustment\n  } = _ref3;\n  const RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);\n  const YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);\n  const yiq = RGBtoYIQ.mul(color);\n  const hue = yiq.z.atan2(yiq.y).add(adjustment);\n  const chroma = yiq.yz.length();\n  return YIQtoRGB.mul(vec3(yiq.x, chroma.mul(hue.cos()), chroma.mul(hue.sin())));\n});\nclass ColorAdjustmentNode extends TempNode {\n  constructor(method, colorNode) {\n    let adjustmentNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : float(1);\n    super('vec3');\n    this.method = method;\n    this.colorNode = colorNode;\n    this.adjustmentNode = adjustmentNode;\n  }\n  construct() {\n    const {\n      method,\n      colorNode,\n      adjustmentNode\n    } = this;\n    const callParams = {\n      color: colorNode,\n      adjustment: adjustmentNode\n    };\n    let outputNode = null;\n    if (method === ColorAdjustmentNode.SATURATION) {\n      outputNode = saturationNode.call(callParams);\n    } else if (method === ColorAdjustmentNode.VIBRANCE) {\n      outputNode = vibranceNode.call(callParams);\n    } else if (method === ColorAdjustmentNode.HUE) {\n      outputNode = hueNode.call(callParams);\n    } else {\n      console.error(`${this.type}: Method \"${this.method}\" not supported!`);\n    }\n    return outputNode;\n  }\n}\nColorAdjustmentNode.SATURATION = 'saturation';\nColorAdjustmentNode.VIBRANCE = 'vibrance';\nColorAdjustmentNode.HUE = 'hue';\nexport default ColorAdjustmentNode;\nexport const saturation = nodeProxy(ColorAdjustmentNode, ColorAdjustmentNode.SATURATION);\nexport const vibrance = nodeProxy(ColorAdjustmentNode, ColorAdjustmentNode.VIBRANCE);\nexport const hue = nodeProxy(ColorAdjustmentNode, ColorAdjustmentNode.HUE);\nexport const lumaCoeffs = vec3(0.2125, 0.7154, 0.0721);\nexport const luminance = function (color) {\n  let luma = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : lumaCoeffs;\n  return dot(color, luma);\n};\naddNodeElement('saturation', saturation);\naddNodeElement('vibrance', vibrance);\naddNodeElement('hue', hue);\naddNodeClass(ColorAdjustmentNode);","map":{"version":3,"names":["TempNode","dot","mix","add","addNodeClass","addNodeElement","ShaderNode","nodeProxy","float","vec3","mat3","saturationNode","_ref","color","adjustment","luminance","vibranceNode","_ref2","average","r","g","b","div","mx","max","amt","sub","mul","hueNode","_ref3","RGBtoYIQ","YIQtoRGB","yiq","hue","z","atan2","y","chroma","yz","length","x","cos","sin","ColorAdjustmentNode","constructor","method","colorNode","adjustmentNode","arguments","undefined","construct","callParams","outputNode","SATURATION","call","VIBRANCE","HUE","console","error","type","saturation","vibrance","lumaCoeffs","luma"],"sources":["C:/Users/LENOVO/Desktop/reactjsProject/drillit/node_modules/three/examples/jsm/nodes/display/ColorAdjustmentNode.js"],"sourcesContent":["import TempNode from '../core/TempNode.js';\r\nimport { dot, mix } from '../math/MathNode.js';\r\nimport { add } from '../math/OperatorNode.js';\r\nimport { addNodeClass } from '../core/Node.js';\r\nimport { addNodeElement, ShaderNode, nodeProxy, float, vec3, mat3 } from '../shadernode/ShaderNode.js';\r\n\r\nconst saturationNode = new ShaderNode( ( { color, adjustment } ) => {\r\n\r\n\treturn adjustment.mix( luminance( color ), color );\r\n\r\n} );\r\n\r\nconst vibranceNode = new ShaderNode( ( { color, adjustment } ) => {\r\n\r\n\tconst average = add( color.r, color.g, color.b ).div( 3.0 );\r\n\r\n\tconst mx = color.r.max( color.g.max( color.b ) );\r\n\tconst amt = mx.sub( average ).mul( adjustment ).mul( - 3.0 );\r\n\r\n\treturn mix( color, mx, amt );\r\n\r\n} );\r\n\r\nconst hueNode = new ShaderNode( ( { color, adjustment } ) => {\r\n\r\n\tconst RGBtoYIQ = mat3( 0.299, 0.587, 0.114, 0.595716, - 0.274453, - 0.321263, 0.211456, - 0.522591, 0.311135 );\r\n\tconst YIQtoRGB = mat3( 1.0, 0.9563, 0.6210, 1.0, - 0.2721, - 0.6474, 1.0, - 1.107, 1.7046 );\r\n\r\n\tconst yiq = RGBtoYIQ.mul( color );\r\n\r\n\tconst hue = yiq.z.atan2( yiq.y ).add( adjustment );\r\n\tconst chroma = yiq.yz.length();\r\n\r\n\treturn YIQtoRGB.mul( vec3( yiq.x, chroma.mul( hue.cos() ), chroma.mul( hue.sin() ) ) );\r\n\r\n} );\r\n\r\nclass ColorAdjustmentNode extends TempNode {\r\n\r\n\tconstructor( method, colorNode, adjustmentNode = float( 1 ) ) {\r\n\r\n\t\tsuper( 'vec3' );\r\n\r\n\t\tthis.method = method;\r\n\r\n\t\tthis.colorNode = colorNode;\r\n\t\tthis.adjustmentNode = adjustmentNode;\r\n\r\n\t}\r\n\r\n\tconstruct() {\r\n\r\n\t\tconst { method, colorNode, adjustmentNode } = this;\r\n\r\n\t\tconst callParams = { color: colorNode, adjustment: adjustmentNode };\r\n\r\n\t\tlet outputNode = null;\r\n\r\n\t\tif ( method === ColorAdjustmentNode.SATURATION ) {\r\n\r\n\t\t\toutputNode = saturationNode.call( callParams );\r\n\r\n\t\t} else if ( method === ColorAdjustmentNode.VIBRANCE ) {\r\n\r\n\t\t\toutputNode = vibranceNode.call( callParams );\r\n\r\n\t\t} else if ( method === ColorAdjustmentNode.HUE ) {\r\n\r\n\t\t\toutputNode = hueNode.call( callParams );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( `${ this.type }: Method \"${ this.method }\" not supported!` );\r\n\r\n\t\t}\r\n\r\n\t\treturn outputNode;\r\n\r\n\t}\r\n\r\n}\r\n\r\nColorAdjustmentNode.SATURATION = 'saturation';\r\nColorAdjustmentNode.VIBRANCE = 'vibrance';\r\nColorAdjustmentNode.HUE = 'hue';\r\n\r\nexport default ColorAdjustmentNode;\r\n\r\nexport const saturation = nodeProxy( ColorAdjustmentNode, ColorAdjustmentNode.SATURATION );\r\nexport const vibrance = nodeProxy( ColorAdjustmentNode, ColorAdjustmentNode.VIBRANCE );\r\nexport const hue = nodeProxy( ColorAdjustmentNode, ColorAdjustmentNode.HUE );\r\n\r\nexport const lumaCoeffs = vec3( 0.2125, 0.7154, 0.0721 );\r\nexport const luminance = ( color, luma = lumaCoeffs ) => dot( color, luma );\r\n\r\naddNodeElement( 'saturation', saturation );\r\naddNodeElement( 'vibrance', vibrance );\r\naddNodeElement( 'hue', hue );\r\n\r\naddNodeClass( ColorAdjustmentNode );\r\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,qBAAqB;AAC1C,SAASC,GAAG,EAAEC,GAAG,QAAQ,qBAAqB;AAC9C,SAASC,GAAG,QAAQ,yBAAyB;AAC7C,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,cAAc,EAAEC,UAAU,EAAEC,SAAS,EAAEC,KAAK,EAAEC,IAAI,EAAEC,IAAI,QAAQ,6BAA6B;AAEtG,MAAMC,cAAc,GAAG,IAAIL,UAAU,CAAEM,IAAA,IAA6B;EAAA,IAA3B;IAAEC,KAAK;IAAEC;EAAW,CAAC,GAAAF,IAAA;EAE7D,OAAOE,UAAU,CAACZ,GAAG,CAAEa,SAAS,CAAEF,KAAM,CAAC,EAAEA,KAAM,CAAC;AAEnD,CAAE,CAAC;AAEH,MAAMG,YAAY,GAAG,IAAIV,UAAU,CAAEW,KAAA,IAA6B;EAAA,IAA3B;IAAEJ,KAAK;IAAEC;EAAW,CAAC,GAAAG,KAAA;EAE3D,MAAMC,OAAO,GAAGf,GAAG,CAAEU,KAAK,CAACM,CAAC,EAAEN,KAAK,CAACO,CAAC,EAAEP,KAAK,CAACQ,CAAE,CAAC,CAACC,GAAG,CAAE,GAAI,CAAC;EAE3D,MAAMC,EAAE,GAAGV,KAAK,CAACM,CAAC,CAACK,GAAG,CAAEX,KAAK,CAACO,CAAC,CAACI,GAAG,CAAEX,KAAK,CAACQ,CAAE,CAAE,CAAC;EAChD,MAAMI,GAAG,GAAGF,EAAE,CAACG,GAAG,CAAER,OAAQ,CAAC,CAACS,GAAG,CAAEb,UAAW,CAAC,CAACa,GAAG,CAAE,CAAE,GAAI,CAAC;EAE5D,OAAOzB,GAAG,CAAEW,KAAK,EAAEU,EAAE,EAAEE,GAAI,CAAC;AAE7B,CAAE,CAAC;AAEH,MAAMG,OAAO,GAAG,IAAItB,UAAU,CAAEuB,KAAA,IAA6B;EAAA,IAA3B;IAAEhB,KAAK;IAAEC;EAAW,CAAC,GAAAe,KAAA;EAEtD,MAAMC,QAAQ,GAAGpB,IAAI,CAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAE,QAAQ,EAAE,CAAE,QAAQ,EAAE,QAAQ,EAAE,CAAE,QAAQ,EAAE,QAAS,CAAC;EAC9G,MAAMqB,QAAQ,GAAGrB,IAAI,CAAE,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,CAAE,MAAM,EAAE,CAAE,MAAM,EAAE,GAAG,EAAE,CAAE,KAAK,EAAE,MAAO,CAAC;EAE3F,MAAMsB,GAAG,GAAGF,QAAQ,CAACH,GAAG,CAAEd,KAAM,CAAC;EAEjC,MAAMoB,GAAG,GAAGD,GAAG,CAACE,CAAC,CAACC,KAAK,CAAEH,GAAG,CAACI,CAAE,CAAC,CAACjC,GAAG,CAAEW,UAAW,CAAC;EAClD,MAAMuB,MAAM,GAAGL,GAAG,CAACM,EAAE,CAACC,MAAM,CAAC,CAAC;EAE9B,OAAOR,QAAQ,CAACJ,GAAG,CAAElB,IAAI,CAAEuB,GAAG,CAACQ,CAAC,EAAEH,MAAM,CAACV,GAAG,CAAEM,GAAG,CAACQ,GAAG,CAAC,CAAE,CAAC,EAAEJ,MAAM,CAACV,GAAG,CAAEM,GAAG,CAACS,GAAG,CAAC,CAAE,CAAE,CAAE,CAAC;AAEvF,CAAE,CAAC;AAEH,MAAMC,mBAAmB,SAAS3C,QAAQ,CAAC;EAE1C4C,WAAWA,CAAEC,MAAM,EAAEC,SAAS,EAAgC;IAAA,IAA9BC,cAAc,GAAAC,SAAA,CAAAT,MAAA,QAAAS,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAGxC,KAAK,CAAE,CAAE,CAAC;IAE1D,KAAK,CAAE,MAAO,CAAC;IAEf,IAAI,CAACqC,MAAM,GAAGA,MAAM;IAEpB,IAAI,CAACC,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACC,cAAc,GAAGA,cAAc;EAErC;EAEAG,SAASA,CAAA,EAAG;IAEX,MAAM;MAAEL,MAAM;MAAEC,SAAS;MAAEC;IAAe,CAAC,GAAG,IAAI;IAElD,MAAMI,UAAU,GAAG;MAAEtC,KAAK,EAAEiC,SAAS;MAAEhC,UAAU,EAAEiC;IAAe,CAAC;IAEnE,IAAIK,UAAU,GAAG,IAAI;IAErB,IAAKP,MAAM,KAAKF,mBAAmB,CAACU,UAAU,EAAG;MAEhDD,UAAU,GAAGzC,cAAc,CAAC2C,IAAI,CAAEH,UAAW,CAAC;IAE/C,CAAC,MAAM,IAAKN,MAAM,KAAKF,mBAAmB,CAACY,QAAQ,EAAG;MAErDH,UAAU,GAAGpC,YAAY,CAACsC,IAAI,CAAEH,UAAW,CAAC;IAE7C,CAAC,MAAM,IAAKN,MAAM,KAAKF,mBAAmB,CAACa,GAAG,EAAG;MAEhDJ,UAAU,GAAGxB,OAAO,CAAC0B,IAAI,CAAEH,UAAW,CAAC;IAExC,CAAC,MAAM;MAENM,OAAO,CAACC,KAAK,CAAG,GAAG,IAAI,CAACC,IAAM,aAAa,IAAI,CAACd,MAAQ,kBAAkB,CAAC;IAE5E;IAEA,OAAOO,UAAU;EAElB;AAED;AAEAT,mBAAmB,CAACU,UAAU,GAAG,YAAY;AAC7CV,mBAAmB,CAACY,QAAQ,GAAG,UAAU;AACzCZ,mBAAmB,CAACa,GAAG,GAAG,KAAK;AAE/B,eAAeb,mBAAmB;AAElC,OAAO,MAAMiB,UAAU,GAAGrD,SAAS,CAAEoC,mBAAmB,EAAEA,mBAAmB,CAACU,UAAW,CAAC;AAC1F,OAAO,MAAMQ,QAAQ,GAAGtD,SAAS,CAAEoC,mBAAmB,EAAEA,mBAAmB,CAACY,QAAS,CAAC;AACtF,OAAO,MAAMtB,GAAG,GAAG1B,SAAS,CAAEoC,mBAAmB,EAAEA,mBAAmB,CAACa,GAAI,CAAC;AAE5E,OAAO,MAAMM,UAAU,GAAGrD,IAAI,CAAE,MAAM,EAAE,MAAM,EAAE,MAAO,CAAC;AACxD,OAAO,MAAMM,SAAS,GAAG,SAAAA,CAAEF,KAAK;EAAA,IAAEkD,IAAI,GAAAf,SAAA,CAAAT,MAAA,QAAAS,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAGc,UAAU;EAAA,OAAM7D,GAAG,CAAEY,KAAK,EAAEkD,IAAK,CAAC;AAAA;AAE3E1D,cAAc,CAAE,YAAY,EAAEuD,UAAW,CAAC;AAC1CvD,cAAc,CAAE,UAAU,EAAEwD,QAAS,CAAC;AACtCxD,cAAc,CAAE,KAAK,EAAE4B,GAAI,CAAC;AAE5B7B,YAAY,CAAEuC,mBAAoB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}